@page
@using Todolist.Services
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<form asp-page="Index" data-ajax="true" data-ajax-method="POST" data-ajax-mode="replace" asp-page-handler=""> <!-- TODO asp-age-handler -->
    <input type="text" name="text" />
    <button type="submit">Hinzufügen</button>
</form>

<ul>
    @foreach (var todo in Model.TodoList)
    {
        <li>
            <form asp-page="Index" data-ajax="true" data-ajax-method="POST" data-ajax-mode="replace" asp-page-handler="Remove">
                <label>"@todo.Text"</label>
                <input hidden name="id" value="@todo.Id"/>
                <button type="submit">Löschen</button>
            </form>
        </li>   
    }
</ul>

@section Scripts{
    <script src="https://cdn.jsdelivr.net/npm/jquery-ajax-unobtrusive@3.2.6/dist/jquery.unobtrusive-ajax.min.js"
            integrity="sha256-PAC000yuHt78nszJ2RO0OiDMu/uLzPLRlYTk8J3AO10="
            crossorigin="anonymous"></script>
}